{% extends 'base.html' %}

{% block title %}–†–µ–µ—Å—Ç—Ä –¥–æ–≥–æ–≤–æ—Ä–æ–≤{% endblock %}

{% block content %}
<h2>üìÅ –†–µ–µ—Å—Ç—Ä –¥–æ–≥–æ–≤–æ—Ä–æ–≤</h2>
<div class="mb-3">
    <a href="{% url 'reestr_export' %}" class="btn btn-success">üì• –≠–∫—Å–ø–æ—Ä—Ç –≤ Excel</a>
    <a href="{% url 'reestr_add' %}" class="btn btn-primary">‚ûï –î–æ–±–∞–≤–∏—Ç—å</a>
</div>
<table id="reestr-table" class="table table-bordered table-striped table-sm">
    <thead class="table-light">
        <tr>
            <th>ID</th>
            <th>Service ID</th>
            <th>Revenue Type</th>
            <th>Contractor</th>
            <th>Contract Number</th>
            <th>Sign Date</th>
            <th>Subject</th>
            <th>Code</th>
            <th>Type</th>
            <th>Status</th>
        </tr>
        <tr>
            {% for _ in reestr.0 %}
                <th><input type="text" placeholder="–§–∏–ª—å—Ç—Ä" class="form-control form-control-sm" /></th>
            {% endfor %}
        </tr>
    </thead>
    <tbody>
        {% for row in reestr %}
        <tr>
            <td>{{ row.id }}</td>
            <td>{{ row.service_id }}</td>
            <td>{{ row.revenue_type }}</td>
            <td>{{ row.contractor }}</td>
            <td>{{ row.contract_number }}</td>
            <td>{{ row.sign_date }}</td>
            <td>{{ row.subject }}</td>
            <td>{{ row.code }}</td>
            <td>{{ row.type }}</td>
            <td>{{ row.status }}</td>
        </tr>
        {% endfor %}
    </tbody>
</table>
{% endblock %}



{% block scripts %}
<script>
$(document).ready(function () {
    let table = $('#reestr-table').DataTable({
        orderCellsTop: true,
        fixedHeader: true,
        language: {
            search: "–ü–æ–∏—Å–∫:",
            lengthMenu: "–ü–æ–∫–∞–∑–∞—Ç—å _MENU_ –∑–∞–ø–∏—Å–µ–π",
            zeroRecords: "–ù–∏—á–µ–≥–æ –Ω–µ –Ω–∞–π–¥–µ–Ω–æ",
            info: "–ü–æ–∫–∞–∑–∞–Ω–æ _START_‚Äì_END_ –∏–∑ _TOTAL_",
            paginate: {
                previous: "‚Üê",
                next: "‚Üí"
            }
        }
    });

    $('#reestr-table thead tr:eq(1) th input').on('keyup change', function () {
        let colIndex = $(this).parent().index();
        table.column(colIndex).search(this.value).draw();
    });
});
</script>
{% endblock %}
